# SonarCloud Configuration for Cookiecutter Python Template
# Documentation: https://docs.sonarsource.com/sonarqube-cloud/

# =============================================================================
# Project Identification
# =============================================================================
sonar.organization=ByronWilliamsCPA
sonar.projectKey=ByronWilliamsCPA_cookiecutter-python-template
sonar.projectName=Cookiecutter Python Template
sonar.projectVersion=1.0.0

# =============================================================================
# Source Code Configuration
# =============================================================================
# Source directories (comma-separated)
# Analyze both hooks and template files
sonar.sources=hooks/,{{cookiecutter.project_slug}}/

# Test directories (comma-separated)
# Note: Template repository has no tests directory at root level
# Template tests are in {{cookiecutter.project_slug}}/tests/ which is a template path
# sonar.tests=tests/

# Python version
sonar.python.version=3.12

# =============================================================================
# Test Coverage Configuration
# =============================================================================
# Coverage report paths (Cobertura XML format)
# Generated by: pytest --cov=hooks --cov-report=xml
sonar.python.coverage.reportPaths=coverage.xml

# =============================================================================
# Exclusions
# =============================================================================
# Files to exclude from analysis
sonar.exclusions=\
  **/__pycache__/**,\
  **/.venv/**,\
  **/.pytest_cache/**,\
  **/.mypy_cache/**,\
  **/.ruff_cache/**,\
  **/dist/**,\
  **/build/**,\
  **/*.egg-info/**,\
  **/node_modules/**,\
  **/.git/**,\
  **/.github/**,\
  **/docs/**,\
  **/tmp_cleanup/**,\
  **/.sonarlint/**,\
  {{cookiecutter.project_slug}}/.venv/**,\
  {{cookiecutter.project_slug}}/.pytest_cache/**,\
  {{cookiecutter.project_slug}}/.mypy_cache/**,\
  {{cookiecutter.project_slug}}/.ruff_cache/**

# Test files to exclude from coverage
sonar.coverage.exclusions=\
  **/tests/**,\
  **/*_test.py,\
  **/test_*.py,\
  **/conftest.py

# Files to exclude from duplication detection
sonar.cpd.exclusions=\
  **/tests/**,\
  **/*_test.py,\
  **/test_*.py,\
  {{cookiecutter.project_slug}}/tests/**

# =============================================================================
# Quality Gate & New Code Definition
# =============================================================================
# Define what constitutes "new code" for analysis
# Options: previous_version, number_of_days, reference_branch
sonar.newCode.referenceBranch=main

# =============================================================================
# Issue Filtering (Optional)
# =============================================================================
# Ignore specific rules for certain files

# Ignore specific issues in template files (Jinja2 syntax can confuse some analyzers)
sonar.issue.ignore.multicriteria=e1,e2,e3,e4

# Ignore complexity warnings in __init__.py files
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e1.resourceKey=**/__init__.py

# Ignore string duplication in template files
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e2.resourceKey={{cookiecutter.project_slug}}/**

# Ignore too-many-arguments in hook files (cookiecutter context)
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S107
sonar.issue.ignore.multicriteria.e3.resourceKey=hooks/**

# Ignore Jinja2 template syntax issues
sonar.issue.ignore.multicriteria.e4.ruleKey=python:*
sonar.issue.ignore.multicriteria.e4.resourceKey=**/*.jinja2

# =============================================================================
# Additional Linter Reports (Optional)
# =============================================================================
# External linter reports for better analysis
# sonar.python.ruff.reportPaths=ruff-report.json
# sonar.python.mypy.reportPaths=mypy-report.xml

# =============================================================================
# Performance & Debugging
# =============================================================================
# Enable verbose logging for debugging (set to false in production)
# sonar.verbose=false

# Scanner timeout (seconds)
# sonar.scanner.socketTimeout=300

# =============================================================================
# Links (displayed in SonarCloud UI)
# =============================================================================
sonar.links.homepage=https://github.com/ByronWilliamsCPA/cookiecutter-python-template
sonar.links.ci=https://github.com/ByronWilliamsCPA/cookiecutter-python-template/actions
sonar.links.issue=https://github.com/ByronWilliamsCPA/cookiecutter-python-template/issues
sonar.links.scm=https://github.com/ByronWilliamsCPA/cookiecutter-python-template
