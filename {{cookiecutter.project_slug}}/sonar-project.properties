{% if cookiecutter.include_sonarcloud == "yes" -%}
# SonarCloud Configuration for {{ cookiecutter.project_name }}
# Documentation: https://docs.sonarsource.com/sonarqube-cloud/

# =============================================================================
# Project Identification
# =============================================================================
sonar.organization={{ cookiecutter.sonarcloud_organization }}
sonar.projectKey={{ cookiecutter.github_org_or_user }}_{{ cookiecutter.project_slug }}
sonar.projectName={{ cookiecutter.project_name }}
sonar.projectVersion={{ cookiecutter.version }}

# =============================================================================
# Source Code Configuration
# =============================================================================
# Source directories (comma-separated)
sonar.sources=src/

# Test directories (comma-separated)
sonar.tests=tests/

# Python version
sonar.python.version={{ cookiecutter.python_version }}

# =============================================================================
# Test Coverage Configuration
# =============================================================================
# Coverage report paths (Cobertura XML format)
# Generated by: pytest --cov=src --cov-report=xml
sonar.python.coverage.reportPaths=coverage.xml

# Branch coverage (recommended for thorough analysis)
# Enabled via pytest-cov: --cov-branch

# =============================================================================
# Exclusions
# =============================================================================
# Files to exclude from analysis
sonar.exclusions=\
  **/__pycache__/**,\
  **/.venv/**,\
  **/.pytest_cache/**,\
  **/.mypy_cache/**,\
  **/.ruff_cache/**,\
  **/dist/**,\
  **/build/**,\
  **/*.egg-info/**,\
  **/node_modules/**,\
  **/.git/**

# Test files to exclude from coverage
sonar.coverage.exclusions=\
  **/tests/**,\
  **/*_test.py,\
  **/test_*.py,\
  **/conftest.py

# Files to exclude from duplication detection
sonar.cpd.exclusions=\
  **/tests/**,\
  **/*_test.py,\
  **/test_*.py

# =============================================================================
# Quality Gate & New Code Definition
# =============================================================================
# Define what constitutes "new code" for analysis
# Options: previous_version, number_of_days, reference_branch
sonar.newCode.referenceBranch=main

# =============================================================================
# Issue Filtering (Optional)
# =============================================================================
# Ignore specific rules for certain files
# Format: sonar.issue.ignore.multicriteria.<key>.ruleKey=<rule>
#         sonar.issue.ignore.multicriteria.<key>.resourceKey=<pattern>

# Example: Ignore complexity warnings in __init__.py files
sonar.issue.ignore.multicriteria=e1,e2,e3

sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e1.resourceKey=**/__init__.py

# Example: Ignore string duplication in test files
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e2.resourceKey=**/tests/**

# Example: Ignore too-many-arguments in test fixtures
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S107
sonar.issue.ignore.multicriteria.e3.resourceKey=**/conftest.py

# =============================================================================
# Additional Linter Reports (Optional)
# =============================================================================
# If using external linters, specify report paths
# sonar.python.pylint.reportPaths=pylint-report.txt
# sonar.python.bandit.reportPaths=bandit-report.json
# sonar.python.mypy.reportPaths=mypy-report.txt

# =============================================================================
# Performance & Debugging
# =============================================================================
# Enable verbose logging for debugging (set to false in production)
# sonar.verbose=false

# Scanner timeout (seconds)
# sonar.scanner.socketTimeout=300

# =============================================================================
# Links (displayed in SonarCloud UI)
# =============================================================================
sonar.links.homepage={{ cookiecutter.repo_url }}
sonar.links.ci={{ cookiecutter.repo_url }}/actions
sonar.links.issue={{ cookiecutter.repo_url }}/issues
sonar.links.scm={{ cookiecutter.repo_url }}
{% endif -%}
